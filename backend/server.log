[dotenv@17.2.3] injecting env (11) from .env -- tip: ⚙️  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ✅ audit secrets and track compliance: https://dotenvx.com/ops
Database connected.
Unable to connect to the database: Error
    at Query.run (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async Order.sync (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/sequelize/lib/model.js:984:11)
    at async Sequelize.sync (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/sequelize/lib/sequelize.js:377:9)
    at async startServer (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/src/server.js:52:5) {
  name: 'SequelizeDatabaseError',
  parent: error: syntax error at or near "USING"
      at Parser.parseErrorMessage (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:508:28)
      at addChunk (node:internal/streams/readable:559:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
      at Readable.push (node:internal/streams/readable:390:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
    length: 95,
    severity: 'ERROR',
    code: '42601',
    detail: undefined,
    hint: undefined,
    position: '554',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'scan.l',
    line: '1180',
    routine: 'scanner_yyerror',
    sql: `ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" DROP NOT NULL;ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" DROP DEFAULT;DO 'BEGIN CREATE TYPE "public"."enum_pedidos_dia_tipo_salida_aplicado" AS ENUM(''primera_salida'', ''salida_normal'', ''pickup''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" TYPE "public"."enum_pedidos_dia_tipo_salida_aplicado"; COMMENT ON COLUMN "pedidos_dia"."tipo_salida_aplicado" IS 'Type of exit applied when order was confirmed' USING ("tipo_salida_aplicado"::"public"."enum_pedidos_dia_tipo_salida_aplicado");`,
    parameters: undefined
  },
  original: error: syntax error at or near "USING"
      at Parser.parseErrorMessage (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/Users/elianuc/.gemini/antigravity/scratch/sistema_pedidos/backend/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:508:28)
      at addChunk (node:internal/streams/readable:559:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
      at Readable.push (node:internal/streams/readable:390:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
    length: 95,
    severity: 'ERROR',
    code: '42601',
    detail: undefined,
    hint: undefined,
    position: '554',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'scan.l',
    line: '1180',
    routine: 'scanner_yyerror',
    sql: `ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" DROP NOT NULL;ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" DROP DEFAULT;DO 'BEGIN CREATE TYPE "public"."enum_pedidos_dia_tipo_salida_aplicado" AS ENUM(''primera_salida'', ''salida_normal'', ''pickup''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" TYPE "public"."enum_pedidos_dia_tipo_salida_aplicado"; COMMENT ON COLUMN "pedidos_dia"."tipo_salida_aplicado" IS 'Type of exit applied when order was confirmed' USING ("tipo_salida_aplicado"::"public"."enum_pedidos_dia_tipo_salida_aplicado");`,
    parameters: undefined
  },
  sql: `ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" DROP NOT NULL;ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" DROP DEFAULT;DO 'BEGIN CREATE TYPE "public"."enum_pedidos_dia_tipo_salida_aplicado" AS ENUM(''primera_salida'', ''salida_normal'', ''pickup''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "pedidos_dia" ALTER COLUMN "tipo_salida_aplicado" TYPE "public"."enum_pedidos_dia_tipo_salida_aplicado"; COMMENT ON COLUMN "pedidos_dia"."tipo_salida_aplicado" IS 'Type of exit applied when order was confirmed' USING ("tipo_salida_aplicado"::"public"."enum_pedidos_dia_tipo_salida_aplicado");`,
  parameters: {}
}
